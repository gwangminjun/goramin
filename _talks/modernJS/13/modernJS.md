---
title: "[모던 자바 스크립트] 13장 스코프"
collection: talks
type: "Talk"
permalink: _talks/modernJS/13/modernJS
date: 2024-03-24
---

# 13장 스코프

---

### 스코프란

모든 식별자 (변수이름, 함수이름, 등등)는 자신이 선언한 위치에 의해 다른코드가 식별자 자신을 참조할수있는 유효범위가 결정된다 <br>
이 유효범위를 스코프라 한다

### 식별자 결정

만약 함수 내부, 외부에 같은 이름의 변수가 선언된다면
이름이 같은 변수중에서 자바스크립트 엔진은 스코프를 통해 어떤 변수를 참조할지 결정한다 <br>
고로 스코프는 식별자를 검색할때 사용하는 규칙이라고 할수있다.

### 코드의 문맥과 환경

<b>"코드가 어디서 실행되며 주변에 어떤코드가 있는지"</b> 이를 렉시컬 환경이라 한다. <br> 즉 코드의 문맥은 렉시컬 환경으로 이뤄진다. <br>
이를 구현한것이 실행 컨텍스트 이며 모든 코드는 실행 컨텍스트에서 평가되고 실행된다.

### 스코프체인

함수는 전역 혹은 함수 내부에서 정의할수있다 함수 내부에 정의한 함수를 <b>중첩함수</b> 라고 하며 중첩함수를 포함한 함수를 <b>외부함수</b> 라고한다<br>
함수가 중첩될수 있으므로 지역스코프도 중첨될수 있으며 이로인해스코프는 계층적 구조를 갖는다 이를 스코프 체인이라고 한다

### 렉시컬 환경

스코프체인의 물리적인 실체는 렉시컬 환경을 비유할수있다 <br>
자바스크립트는 코드 실행전에 스코프 체인과 유사한 자료구조인 렉시컬환경을 실제로 생성한다 <br>
변수 선언이 실행되면 변수 식별자가 자료구조에 key로 등록되고 할당이 일어나면 변수 식별자에 해당 값을 변경한다.

### 함수레벨 스코프

자바스크립트는 함수 몸체 내부를 지역이라 징하고 지역은 지역 스코프를 만든다 이는 코드블록이 아닌 함수에 의해서 만 지역스코프가 생성된다는 뜻이다 <br>

C / JAVA 등 대부분의 프로그래밍언어는 함수몸체 뿐만 아니라 모든 코드블록이 지역 스코프를 만든다 이러한 특성을 <b>블록레벨스코프</b> 라 한다 <br>

하지만 var로 선언된 자바스크립트 변수는 오로지 함수의 코드블록만을 지역스코프로 인정하며 이러한 특성을 <b>함수 레벨 스코프</b> 라고한다

### 렉시컬 스코프

```javascript
function test1() {
  test2();
}

function test2() {}
```

해당 코드 에서 test2 함수의 상위 스코프를 결정하는 패턴은 두가지이다<br>

1. 함수를 어디서 호출했는지
2. 함수를 어디서 정의했는지

1번 방식은 동적스코프라 칭하며 함수를 정의하는 시점에는 함수가 어디서 호출될수 없으며 함수를 호출되는 시점에 동적으로 상위 스코프를 결정하므로 동적 스코프라고 한다. <br>

2번 방식은 렉시컬 스코프 또는 정적 스코프라고 하며
함수 정의가 평가되는 시전에 상위 스코프가 정적으로 결정된다 대부분의 프로그래밍언어가 이방식을 따른다 <br>
자바스크립트 또한 렉시컬 스코프를 따른다



#### reference

